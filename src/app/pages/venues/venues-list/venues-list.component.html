<div class="d-grid gap-2 d-md-flex justify-content-md-end mb-2 mt-2">
  <h4>Listado de locales</h4>
  <div class="col text-end">
    <button routerLink="/venue/nuevo" class="btn btn-primary">
      <i class="fas fa-plus"></i>
      Nuevo
    </button>
  </div>
</div>

<div class="form-group mt-2">
  <input  name="filterVenue"
          [(ngModel)]="filterVenue"
          (keyup)="buscar(filterVenue)"
          class="form-control" 
          type="search" 
          placeholder="Buscar por ID, nombre, localidad, cliente, ..." 
          aria-label="Search">
</div>
<table class="table table-condensed table-striped" *ngIf="!cargando && venues.length>0" >
  <thead>
    <!-- [ngStyle]="{'width':'100px'}" -->
    <tr>
      <th scope="col" class="col-sm-1">#ID</th>
      <th scope="col" class="col-sm-3">Nombre</th>
      <th scope="col" class="col-sm-3">Localidad</th>
      <th scope="col" class="col-sm-3">Direcci√≥n</th>
      <th scope="col" class="col-sm-2">Acciones</th>
    </tr>
  </thead>

  <tbody>
    <tr *ngFor="let venue of venues | venue:filterVenue:page:linesPages:venues.length; let i =index">
      <td >{{venue.id}} <span *ngIf="venue.filter" class="badge bg-warning text-dark">cli</span></td>
      <td>{{venue.name}}</td>
      <td>{{venue.location[venue.location.length-1].territorialEntityName}} ({{venue.location[venue.location.length-2].territorialEntityName}})</td>
      <td>{{venue.roadType.description}} {{venue.address}} {{venue.streetNumber}}</td>
      <td>
        <button type="button" 
                class="btn btn-light btn-sm mr-1" 
                (click)="editVenue(venue)" 
                placement="bottom" ngbTooltip="Editar" [openDelay]="300">
          <i class="fas fa-edit"></i>
        </button>
        &nbsp;
        <button type="button" 
                class="btn btn-light btn-sm" 
                (click)="removeVenue(venue)"
                placement="bottom" ngbTooltip="Borrar" [openDelay]="300">
          <i class="far fa-trash-alt"></i>
        </button>
        &nbsp;
        <button type="button" 
                class="btn btn-light btn-sm position-relative" 
                (click)="sitesList(venue)"
                placement="bottom" ngbTooltip="Emplazamientos" [openDelay]="300">
                <i class="fas fa-tv"></i>
                <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success">
                  {{venue.sites.length}}
                </span>
        </button>    
       </td>
    </tr> 
  </tbody>
</table>


<div class="text-center mt-3" *ngIf="cargando">
  <div class="spinner-border" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
</div>

<div class="d-grid text-center d-md-block" 
  *ngIf="venues.length>linesPages">
  <button class="btn btn-outline-secondary btn-sm"
          (click)="prevPage()"
          [disabled]="page===0">
    Pag. Anterior
  </button>
  &nbsp;
  <button class="btn btn-outline-secondary btn-sm"
          (click)="nextPage()"
          [disabled]="(venues |venue:filterVenue:page:linesPages).length<linesPages"> 
    Pag. Siguiente
  </button>
</div>


